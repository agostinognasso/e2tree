<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="What the package does (one paragraph).">
<title>What the Package Does (One Line, Title Case) â€¢ e2tree</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="What the Package Does (One Line, Title Case)">
<meta property="og:description" content="What the package does (one paragraph).">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">e2tree</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>You can install the developer version of e2tree from <a href="https://github.com" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"massimoaria/e2tree"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va">e2tree</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>dplyr.summarise.inform <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://www.stat.berkeley.edu/~breiman/RandomForests/" class="external-link">randomForest</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://Matrix.R-forge.R-project.org/" class="external-link">Matrix</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://future.apply.futureverse.org" class="external-link">future.apply</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="warnings">Warnings<a class="anchor" aria-label="anchor" href="#warnings"></a>
</h2>
<p>The package is still under development and therefore, for the time being, there are the following limitations:</p>
<ul>
<li><p>Only ensembles trained with the randomforest package are supported. Additional packages and approaches will be supported in the future;</p></li>
<li><p>Currently e2tree works only in the case ofu classification problems. It will gradually be extended to other problems related to the nature of the response variable: regression, counting, multivariate response, etc.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="example-1-iris-dataset">Example 1: IRIS dataset<a class="anchor" aria-label="anchor" href="#example-1-iris-dataset"></a>
</h2>
<p>In this example, we want to show the main functions of the e2tree package.</p>
<p>Starting from the IRIS dataset, we will train an ensemble tree using the randomforest package and then subsequently use e2tree to obtain an explainable tree synthesis of the ensemble classifier.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set random seed to make results reproducible:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="co"># Calculate the size of each of the data sets:</span></span>
<span><span class="va">data_set_size</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="co"># Generate a random sample of "data_set_size" indexes</span></span>
<span><span class="va">indexes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span>, size <span class="op">=</span> <span class="va">data_set_size</span><span class="op">)</span></span>
<span><span class="co"># Assign the data to the correct sets</span></span>
<span><span class="va">training</span> <span class="op">&lt;-</span> <span class="va">iris</span><span class="op">[</span><span class="va">indexes</span>,<span class="op">]</span></span>
<span><span class="va">validation</span> <span class="op">&lt;-</span> <span class="va">iris</span><span class="op">[</span><span class="op">-</span><span class="va">indexes</span>,<span class="op">]</span></span>
<span><span class="va">response_training</span> <span class="op">&lt;-</span> <span class="va">training</span><span class="op">[</span>,<span class="fl">5</span><span class="op">]</span></span>
<span><span class="va">response_validation</span> <span class="op">&lt;-</span> <span class="va">validation</span><span class="op">[</span>,<span class="fl">5</span><span class="op">]</span></span></code></pre></div>
<p>Train an Random Forest model with 1000 weak learners</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Perform training:</span></span>
<span><span class="va">rf</span> <span class="op">=</span> <span class="fu">randomForest</span><span class="op">(</span><span class="va">Species</span> <span class="op">~</span> <span class="va">.</span>, data<span class="op">=</span><span class="va">training</span>, ntree<span class="op">=</span><span class="fl">1000</span>, mtry<span class="op">=</span><span class="fl">2</span>, importance<span class="op">=</span><span class="cn">TRUE</span>, keep.inbag <span class="op">=</span> <span class="cn">TRUE</span>, proximity<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p>Here, we create the dissimilarity matrix between observations through the createDisMatrix function</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">D</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/createDisMatrix.html">createDisMatrix</a></span><span class="op">(</span><span class="va">rf</span>, data<span class="op">=</span><span class="va">training</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Analized  100  trees</span></span>
<span><span class="co">#&gt; Analized  200  trees</span></span>
<span><span class="co">#&gt; Analized  300  trees</span></span>
<span><span class="co">#&gt; Analized  400  trees</span></span>
<span><span class="co">#&gt; Analized  500  trees</span></span>
<span><span class="co">#&gt; Analized  600  trees</span></span>
<span><span class="co">#&gt; Analized  700  trees</span></span>
<span><span class="co">#&gt; Analized  800  trees</span></span>
<span><span class="co">#&gt; Analized  900  trees</span></span>
<span><span class="co">#&gt; Analized  1000  trees</span></span>
<span><span class="co">#dis &lt;- 1-rf$proximity</span></span></code></pre></div>
<p>setting e2tree parameters</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">setting</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>impTotal<span class="op">=</span><span class="fl">0.1</span>, maxDec<span class="op">=</span><span class="fl">0.01</span>, n<span class="op">=</span><span class="fl">5</span>, level<span class="op">=</span><span class="fl">5</span>, tMax<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>Costruisco lâ€™albero sintesi del RF</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tree</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/e2tree.html">e2tree</a></span><span class="op">(</span><span class="va">D</span>, <span class="va">training</span><span class="op">[</span>,<span class="op">-</span><span class="fl">5</span><span class="op">]</span>, <span class="va">response_training</span>, <span class="va">setting</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span><span class="co">#&gt; [1] 3</span></span>
<span><span class="co">#&gt; [1] 6</span></span>
<span><span class="co">#&gt; [1] 13</span></span>
<span><span class="co">#&gt; [1] 12</span></span>
<span><span class="co">#&gt; [1] 7</span></span></code></pre></div>
<p>Unâ€™occhiata allâ€™oggetto info1</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tree</span> <span class="op">%&gt;%</span> <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="1%">
<col width="0%">
<col width="2%">
<col width="3%">
<col width="1%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="1%">
<col width="3%">
<col width="2%">
<col width="3%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="51%">
<col width="11%">
<col width="1%">
</colgroup>
<thead><tr class="header">
<th align="right">node</th>
<th align="right">n</th>
<th align="left">pred</th>
<th align="left">prob</th>
<th align="right">impTotal</th>
<th align="right">impChildren</th>
<th align="right">decImp</th>
<th align="right">decImpSur</th>
<th align="left">variable</th>
<th align="right">split</th>
<th align="left">splitLabel</th>
<th align="left">variableSur</th>
<th align="left">splitLabelSur</th>
<th align="right">parent</th>
<th align="left">children</th>
<th align="left">terminal</th>
<th align="left">obs</th>
<th align="left">path</th>
<th align="right">pred_val</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">75</td>
<td align="left">setosa</td>
<td align="left">0.386666666666667</td>
<td align="right">0.6989521</td>
<td align="right">0.3628642</td>
<td align="right">0.3360879</td>
<td align="right">0.2496373</td>
<td align="left">Petal.Length</td>
<td align="right">53</td>
<td align="left">Petal.Length &lt;=1.9</td>
<td align="left">Petal.Width</td>
<td align="left">Petal.Width &lt;=0.6</td>
<td align="right">0</td>
<td align="left">2, 3</td>
<td align="left">FALSE</td>
<td align="left">1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75</td>
<td align="left"></td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">29</td>
<td align="left">setosa</td>
<td align="left">1</td>
<td align="right">0.0162866</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">TRUE</td>
<td align="left">4, 5, 8, 11, 14, 17, 21, 23, 26, 27, 29, 30, 32, 35, 37, 39, 42, 43, 44, 46, 47, 48, 49, 57, 60, 62, 64, 72, 73</td>
<td align="left">Petal.Length &lt;=1.9</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">46</td>
<td align="left">virginica</td>
<td align="left">0.58695652173913</td>
<td align="right">0.5813588</td>
<td align="right">0.2091960</td>
<td align="right">0.3721627</td>
<td align="right">0.3301853</td>
<td align="left">Petal.Width</td>
<td align="right">92</td>
<td align="left">Petal.Width &lt;=1.7</td>
<td align="left">Petal.Length</td>
<td align="left">Petal.Length &lt;=4.7</td>
<td align="right">1</td>
<td align="left">6, 7</td>
<td align="left">FALSE</td>
<td align="left">1, 2, 3, 6, 7, 9, 10, 12, 13, 15, 16, 18, 19, 20, 22, 24, 25, 28, 31, 33, 34, 36, 38, 40, 41, 45, 50, 51, 52, 53, 54, 55, 56, 58, 59, 61, 63, 65, 66, 67, 68, 69, 70, 71, 74, 75</td>
<td align="left">!Petal.Length &lt;=1.9</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">20</td>
<td align="left">versicolor</td>
<td align="left">0.95</td>
<td align="right">0.3126219</td>
<td align="right">0.2283824</td>
<td align="right">0.0842395</td>
<td align="right">0.0226385</td>
<td align="left">Petal.Length</td>
<td align="right">64</td>
<td align="left">Petal.Length &lt;=4.7</td>
<td align="left">Petal.Width</td>
<td align="left">Petal.Width &lt;=1.5</td>
<td align="right">3</td>
<td align="left">12, 13</td>
<td align="left">FALSE</td>
<td align="left">2, 6, 7, 10, 12, 13, 20, 22, 24, 33, 50, 51, 54, 55, 56, 61, 65, 68, 69, 75</td>
<td align="left">!Petal.Length &lt;=1.9 &amp; Petal.Width &lt;=1.7</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="right">26</td>
<td align="left">virginica</td>
<td align="left">1</td>
<td align="right">0.1296377</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">3</td>
<td align="left">NA</td>
<td align="left">TRUE</td>
<td align="left">1, 3, 9, 15, 16, 18, 19, 25, 28, 31, 34, 36, 38, 40, 41, 45, 52, 53, 58, 59, 63, 66, 67, 70, 71, 74</td>
<td align="left">!Petal.Length &lt;=1.9 &amp; !Petal.Width &lt;=1.7</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="right">16</td>
<td align="left">versicolor</td>
<td align="left">1</td>
<td align="right">0.1525959</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">6</td>
<td align="left">NA</td>
<td align="left">TRUE</td>
<td align="left">2, 6, 7, 10, 13, 20, 24, 33, 51, 54, 55, 56, 61, 65, 68, 75</td>
<td align="left">!Petal.Length &lt;=1.9 &amp; Petal.Width &lt;=1.7 &amp; Petal.Length &lt;=4.7</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">13</td>
<td align="right">4</td>
<td align="left">versicolor</td>
<td align="left">0.75</td>
<td align="right">0.5315285</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">6</td>
<td align="left">NA</td>
<td align="left">TRUE</td>
<td align="left">12, 22, 50, 69</td>
<td align="left">!Petal.Length &lt;=1.9 &amp; Petal.Width &lt;=1.7 &amp; !Petal.Length &lt;=4.7</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>Predizione con il nuovo albero (esempio sul training)</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ePredTree.html">ePredTree</a></span><span class="op">(</span><span class="va">tree</span>, <span class="va">training</span><span class="op">[</span>,<span class="op">-</span><span class="fl">5</span><span class="op">]</span>, target<span class="op">=</span><span class="st">"virginica"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span><span class="co">#&gt; [1] 3</span></span>
<span><span class="co">#&gt; [1] 4</span></span></code></pre></div>
<p>Comparazione tra le predizioni (campione training) di RF e eTree</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">pred</span><span class="op">$</span><span class="va">fit</span>,<span class="va">rf</span><span class="op">$</span><span class="va">predicted</span><span class="op">)</span></span>
<span><span class="co">#&gt;             </span></span>
<span><span class="co">#&gt;              setosa versicolor virginica</span></span>
<span><span class="co">#&gt;   setosa         29          0         0</span></span>
<span><span class="co">#&gt;   versicolor      0         18         2</span></span>
<span><span class="co">#&gt;   virginica       0          0        26</span></span></code></pre></div>
<p>Comparazione tra le predizioni (campione training) di RF e risposta corretta</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">rf</span><span class="op">$</span><span class="va">predicted</span>, <span class="va">response_training</span><span class="op">)</span></span>
<span><span class="co">#&gt;             response_training</span></span>
<span><span class="co">#&gt;              setosa versicolor virginica</span></span>
<span><span class="co">#&gt;   setosa         29          0         0</span></span>
<span><span class="co">#&gt;   versicolor      0         17         1</span></span>
<span><span class="co">#&gt;   virginica       0          2        26</span></span></code></pre></div>
<p>Comparazione tra le predizioni (campione training) di eTree e risposta corretta</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">pred</span><span class="op">$</span><span class="va">fit</span>,<span class="va">response_training</span><span class="op">)</span></span>
<span><span class="co">#&gt;             response_training</span></span>
<span><span class="co">#&gt;              setosa versicolor virginica</span></span>
<span><span class="co">#&gt;   setosa         29          0         0</span></span>
<span><span class="co">#&gt;   versicolor      0         19         1</span></span>
<span><span class="co">#&gt;   virginica       0          0        26</span></span></code></pre></div>
<p>Variable Importance</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rfimp</span> <span class="op">&lt;-</span> <span class="va">rf</span><span class="op">$</span><span class="va">importance</span> <span class="op">%&gt;%</span> <span class="va">as.data.frame</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">rf</span><span class="op">$</span><span class="va">importance</span><span class="op">)</span>,</span>
<span>         RF_Var_Imp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">MeanDecreaseAccuracy</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">Variable</span>, <span class="va">RF_Var_Imp</span><span class="op">)</span></span>
<span></span>
<span><span class="va">V</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/vimp.html">vimp</a></span><span class="op">(</span><span class="va">tree</span>, <span class="va">response_training</span>, <span class="va">training</span><span class="op">[</span>,<span class="op">-</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-14-1.png" width="100%"><img src="reference/figures/README-unnamed-chunk-14-2.png" width="100%"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">V</span> <span class="op">&lt;-</span> <span class="va">V</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">Variable</span>, <span class="va">.data</span><span class="op">$</span><span class="va">MeanImpurityDecrease</span>, <span class="va">.data</span><span class="op">$</span><span class="va">`ImpDec_ setosa`</span>, <span class="va">.data</span><span class="op">$</span><span class="va">`ImpDec_ versicolor`</span>,<span class="va">.data</span><span class="op">$</span><span class="va">`ImpDec_ virginica`</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate_at</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MeanImpurityDecrease"</span>,<span class="st">"ImpDec_ setosa"</span>, <span class="st">"ImpDec_ versicolor"</span>,<span class="st">"ImpDec_ virginica"</span><span class="op">)</span>, <span class="va">round</span>,<span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">rfimp</span>, by <span class="op">=</span> <span class="st">"Variable"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">Variable</span>, <span class="va">RF_Var_Imp</span>, <span class="va">MeanImpurityDecrease</span>, <span class="fu">starts_with</span><span class="op">(</span><span class="st">"ImpDec"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">rename</span><span class="op">(</span>ETree_Var_Imp <span class="op">=</span> <span class="va">MeanImpurityDecrease</span><span class="op">)</span></span>
<span></span>
<span><span class="va">V</span></span>
<span><span class="co">#&gt; # A tibble: 2 Ã— 6</span></span>
<span><span class="co">#&gt;   Variable     RF_Var_Imp ETree_Var_Imp `ImpDec_ setosa` `ImpDec_ versicolor`</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;             &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;                &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Petal.Length       0.27          0.36             0.34                 0.02</span></span>
<span><span class="co">#&gt; 2 Petal.Width        0.34          0.23            NA                   NA   </span></span>
<span><span class="co">#&gt; # â€¦ with 1 more variable: `ImpDec_ virginica` &lt;dbl&gt;</span></span></code></pre></div>
<p>Comparazione con il campione di validazione</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rf.pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">rf</span>, <span class="va">validation</span><span class="op">[</span>,<span class="op">-</span><span class="fl">5</span><span class="op">]</span>, proximity <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pred_val</span><span class="op">&lt;-</span> <span class="fu"><a href="reference/ePredTree.html">ePredTree</a></span><span class="op">(</span><span class="va">tree</span>, <span class="va">validation</span><span class="op">[</span>,<span class="op">-</span><span class="fl">5</span><span class="op">]</span>, target<span class="op">=</span><span class="st">"virginica"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span><span class="co">#&gt; [1] 3</span></span>
<span><span class="co">#&gt; [1] 4</span></span></code></pre></div>
<p>Comparazione tra le predizioni (campione validation) di RF e eTree</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">pred_val</span><span class="op">$</span><span class="va">fit</span>,<span class="va">rf.pred</span><span class="op">$</span><span class="va">predicted</span><span class="op">)</span></span>
<span><span class="co">#&gt;             </span></span>
<span><span class="co">#&gt;              setosa versicolor virginica</span></span>
<span><span class="co">#&gt;   setosa         21          0         0</span></span>
<span><span class="co">#&gt;   versicolor      0         34         0</span></span>
<span><span class="co">#&gt;   virginica       0          0        20</span></span></code></pre></div>
<p>Comparazione tra le predizioni (campione validation) di RF e risposta corretta</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">rf.pred</span><span class="op">$</span><span class="va">predicted</span>, <span class="va">response_validation</span><span class="op">)</span></span>
<span><span class="co">#&gt;             response_validation</span></span>
<span><span class="co">#&gt;              setosa versicolor virginica</span></span>
<span><span class="co">#&gt;   setosa         21          0         0</span></span>
<span><span class="co">#&gt;   versicolor      0         30         4</span></span>
<span><span class="co">#&gt;   virginica       0          1        19</span></span>
<span><span class="va">rf.prob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">rf</span>, <span class="va">validation</span><span class="op">[</span>,<span class="op">-</span><span class="fl">5</span><span class="op">]</span>, proximity <span class="op">=</span> <span class="cn">TRUE</span>, type<span class="op">=</span><span class="st">"prob"</span><span class="op">)</span></span>
<span><span class="va">roc_rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/roc.html">roc</a></span><span class="op">(</span><span class="va">response_validation</span>,<span class="va">rf.prob</span><span class="op">$</span><span class="va">predicted</span><span class="op">[</span>,<span class="st">"virginica"</span><span class="op">]</span>,target<span class="op">=</span><span class="st">"virginica"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-17-1.png" width="100%"></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">roc_rf</span><span class="op">$</span><span class="va">auc</span></span>
<span><span class="co">#&gt; [1] 0.9873725</span></span></code></pre></div>
<p>Comparazione tra le predizioni (campione validation) di eTree e risposta corretta</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">pred_val</span><span class="op">$</span><span class="va">fit</span>,<span class="va">response_validation</span><span class="op">)</span></span>
<span><span class="co">#&gt;             response_validation</span></span>
<span><span class="co">#&gt;              setosa versicolor virginica</span></span>
<span><span class="co">#&gt;   setosa         21          0         0</span></span>
<span><span class="co">#&gt;   versicolor      0         30         4</span></span>
<span><span class="co">#&gt;   virginica       0          1        19</span></span>
<span><span class="va">roc_res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/roc.html">roc</a></span><span class="op">(</span><span class="va">response_validation</span>,<span class="va">pred_val</span><span class="op">$</span><span class="va">score</span>,target<span class="op">=</span><span class="st">"virginica"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-18-1.png" width="100%"></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">roc_res</span><span class="op">$</span><span class="va">auc</span></span>
<span><span class="co">#&gt; [1] 0.96395</span></span></code></pre></div>
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing e2tree</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Massimo Aria <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-8517-9411" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/massimoaria/e2tree/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/massimoaria/e2tree/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Massimo Aria.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
